<!DOCTYPE html>
<html lang="nl-nl">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    
    <title>Cobra | QtechNG Blog</title>
    <meta name="viewport" content="width=device-width,minimum-scale=1">
    <meta name="generator" content="Hugo 0.69.0-DEV" />
    
    
      <META NAME="ROBOTS" CONTENT="NOINDEX, NOFOLLOW">
    

    
    
      <link href="/qtechng-blog/dist/css/app.1cb140d8ba31d5b2f1114537dd04802a.css" rel="stylesheet">
    

    

    
      
    

    
    
    <meta property="og:title" content="Cobra" />
<meta property="og:description" content="Als je een goede CLI wil bouwen, moet je op zoek naar een goed framewerk.
Voor onze in-house Python code hebben we Toolcat maar voor een software gebaseerd op Go hadden we nog niet iets dergelijks.
Een paar jaar geleden volgen Luc en ik een tutorial over Go: het was een duizelingwekkende ervaring aan sneltrein-tempo gegeven door Steve Francia. Deze man werkt voor Google en was rechtstreeks betrokken bij het Go-project." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://rphilips.github.io/qtechng-blog/post/cobra/" />
<meta property="article:published_time" content="2020-05-24T11:03:36+02:00" />
<meta property="article:modified_time" content="2020-05-24T11:03:36+02:00" />
<meta itemprop="name" content="Cobra">
<meta itemprop="description" content="Als je een goede CLI wil bouwen, moet je op zoek naar een goed framewerk.
Voor onze in-house Python code hebben we Toolcat maar voor een software gebaseerd op Go hadden we nog niet iets dergelijks.
Een paar jaar geleden volgen Luc en ik een tutorial over Go: het was een duizelingwekkende ervaring aan sneltrein-tempo gegeven door Steve Francia. Deze man werkt voor Google en was rechtstreeks betrokken bij het Go-project.">
<meta itemprop="datePublished" content="2020-05-24T11:03:36&#43;02:00" />
<meta itemprop="dateModified" content="2020-05-24T11:03:36&#43;02:00" />
<meta itemprop="wordCount" content="548">



<meta itemprop="keywords" content="" /><meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Cobra"/>
<meta name="twitter:description" content="Als je een goede CLI wil bouwen, moet je op zoek naar een goed framewerk.
Voor onze in-house Python code hebben we Toolcat maar voor een software gebaseerd op Go hadden we nog niet iets dergelijks.
Een paar jaar geleden volgen Luc en ik een tutorial over Go: het was een duizelingwekkende ervaring aan sneltrein-tempo gegeven door Steve Francia. Deze man werkt voor Google en was rechtstreeks betrokken bij het Go-project."/>

  </head>

  <body class="ma0 avenir bg-near-white">

    
   
  

  
  
  <header class="cover bg-top" style="background-image: url('https://rphilips.github.io/qtechng-blog/images/cobra.svg');">
    <div class="pb3-m pb6-l bg-black-60">
      <nav class="pv3 ph3 ph4-ns" role="navigation">
  <div class="flex-l justify-between items-center center">
    <a href="https://rphilips.github.io/qtechng-blog/" class="f3 fw2 hover-white no-underline white-90 dib">
      QtechNG Blog
    </a>
    <div class="flex-l items-center">
      

      
        <ul class="pl0 mr3">
          
          <li class="list f5 f4-ns fw4 dib pr3">
            <a class="hover-white no-underline white-90" href="/qtechng-blog/post/" title="Artikelen page">
              Artikelen
            </a>
          </li>
          
        </ul>
      
      














    </div>
  </div>
</nav>

      <div class="tc-l pv6 ph3 ph4-ns">
        
          <h1 class="f2 f1-l fw2 white-90 mb0 lh-title">Cobra</h1>
          
        
      </div>
    </div>
  </header>



    <main class="pb7" role="main">
      
  
  <article class="flex-l flex-wrap justify-between mw8 center ph3">
    <header class="mt4 w-100">
      <aside class="instapaper_ignoref b helvetica tracked">
          
        ARTIKELEN
      </aside>
      


      <h1 class="f1 athelas mt3 mb1">Cobra</h1>
      
      
      <time class="f6 mv4 dib tracked" datetime="2020-05-24T11:03:36&#43;02:00">May 24, 2020</time>

      
      
    </header>
    <div class="nested-copy-line-height lh-copy serif f4 nested-links nested-img mid-gray pr4-l w-two-thirds-l"><p>Als je een goede <a href="https://en.wikipedia.org/wiki/Command-line_interface" title="Command Line Interface">CLI</a> wil bouwen, moet je op zoek naar een goed framewerk.</p>
<p>Voor onze in-house <code>Python</code> code hebben we <code>Toolcat</code> maar voor een software gebaseerd op <code>Go</code> hadden we nog niet iets dergelijks.</p>
<p>Een paar jaar geleden volgen Luc en ik een tutorial over Go: het was een duizelingwekkende ervaring aan sneltrein-tempo gegeven door Steve Francia.
Deze man werkt voor Google en was rechtstreeks betrokken bij het Go-project. Zijn taak was daarbij niet zozeer het implementeren van Go. Neen, hij moest zorgen voor een aantal instrumenten zodanig dat ontwikkelaars binnen Google snel aan de slag konden met Go.</p>
<p>Hij vervaardigde verschillende outstanding libraries en softwares, allen gebaseerd op Go.</p>
<p>Zo maakte hij <a href="https://gohugo.io/" title="Hugo">Hugo</a>, een generator voor statische websites. Deze blog is bijvoorbeeld gemaakt met Hugo. Hugo ontpopte zich ondertussen als één van de meest populaire web builders.</p>
<p>Zijn meest populaire product is echter het duo <a href="https://github.com/spf13/cobra" title="Cobra/Viper">Cobra/Viper</a>. Cobra is een framewerk om CLI&rsquo;s te maken. Viper is dan weer een interactieve tool die hierbij kan helpen.</p>
<p>Cobra is simpelweg het meest gebruikte CLI-framewerk in de Go-wereld: Hugo en Kubernetes zijn maar een paar producten die hiermee gebouwd zijn.</p>
<p>De redenen van het succes van Cobra zijn velerlei:</p>
<ul>
<li>in de eerste plaats is er de kwaliteit van de code: Cobra is simpelweg een tutorial voor Go</li>
<li>Cobra is platform onafhankelijk</li>
<li>De software is zeer flexibel en opgewassen tegen alle taken die je er kunt tegen aan gooien</li>
<li>De software gaat verder dan mogelijk maken van commando&rsquo;s: help en documentatie worden automatische gegeneerd en in allerlei formaten</li>
<li>Aangemaakte software is POSIX-compliant</li>
</ul>
<p>Cobra is zeker een goede kandidaat om er <code>qtechng</code> mee te vervaardigen.</p>
<p>Ik heb ondertussen verschillende CLI&rsquo;s gemaakt met <code>Cobra</code>. Een goed voorbeeld is <code>Qq</code>. <code>Qq</code> is een voorloper van <code>qtechng</code>.</p>
<div class="highlight"><pre style="color:#586e75;background-color:#eee8d5;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">
/home/rphilips/Desktop$ Qq
Qq maintains the Brocade software:

    - Development
    - Installation
    - Deployment
    - Version Control
        - Management

Usage:
  Qq [command]

Available Commands:
  about       Useful information about <span style="color:#2aa198">`</span>Qq<span style="color:#2aa198">`</span>
  <span style="color:#cb4b16">help</span>        Help about any <span style="color:#cb4b16">command</span>
  project     Project functions
  system      System information
  version     Version functions

Flags:
      --cwd string         working directory
      --directory string   qpath of a directory under a project
      --editor string      editor name
      --force              with force
  -h, --help               <span style="color:#cb4b16">help</span> <span style="color:#859900">for</span> Qq
      --info               lists arguments, flags and global values
      --jq string          jq <span style="color:#cb4b16">command</span>
      --lower              transforms to lowercase
      --pattern string     Posix glob pattern
      --project string     project to work with
      --recurse            recursively walks through directory and subdirectories
      --regexp             searches as a regular expression
      --remote             execute on the remote server
      --tree               handles filenames as rpaths in the project
      --uid string         user id
      --unhex .            unhexify the arguments starting with .
      --verbose            verbose output (default <span style="color:#cb4b16">true</span>)
      --version string     version to work with

Use <span style="color:#2aa198">&#34;Qq [command] --help&#34;</span> <span style="color:#859900">for</span> more information about a command.
</code></pre></div><p>Een paar voorbeelden om te werken met de CLI:</p>
<div class="highlight"><pre style="color:#586e75;background-color:#eee8d5;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">Qq project create /take/application --version=5.10
Qq project list /take/*
</code></pre></div><p>Het programmeren zelf is descriptief. Om bijvoorbeeld <code>Qq project create</code> te maken is het voldoende om in de code de volgende beschrijving te plaatsen:</p>
<div class="highlight"><pre style="color:#586e75;background-color:#eee8d5;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#859900">var</span> <span style="color:#268bd2">projectListCmd</span> = &amp;<span style="color:#268bd2">cobra</span>.<span style="color:#268bd2">Command</span>{
    <span style="color:#268bd2">Use</span>:     <span style="color:#2aa198">&#34;list&#34;</span>,
    <span style="color:#268bd2">Short</span>:   <span style="color:#2aa198">&#34;List projects&#34;</span>,
    <span style="color:#268bd2">Long</span>:    <span style="color:#2aa198">`Command lists all project matching a given pattern`</span>,
    <span style="color:#268bd2">Args</span>:    <span style="color:#268bd2">cobra</span>.<span style="color:#268bd2">MaximumNArgs</span>(<span style="color:#2aa198;font-weight:bold">1</span>),
    <span style="color:#268bd2">Example</span>: <span style="color:#2aa198">&#34;Qq project list /stdlib/t*&#34;</span>,
    <span style="color:#268bd2">RunE</span>:    <span style="color:#268bd2">projectList</span>,
    <span style="color:#268bd2">PreRun</span>:  <span style="color:#859900">func</span>(<span style="color:#268bd2">cmd</span> *<span style="color:#268bd2">cobra</span>.<span style="color:#268bd2">Command</span>, <span style="color:#268bd2">args</span> []<span style="color:#859900;font-weight:bold">string</span>) { <span style="color:#268bd2">preSSH</span>(<span style="color:#268bd2">cmd</span>) },
    <span style="color:#268bd2">Annotations</span>: <span style="color:#859900">map</span>[<span style="color:#859900;font-weight:bold">string</span>]<span style="color:#859900;font-weight:bold">string</span>{
        <span style="color:#2aa198">&#34;remote-allowed&#34;</span>:    <span style="color:#2aa198">&#34;yes&#34;</span>,
        <span style="color:#2aa198">&#34;always-remote-onW&#34;</span>: <span style="color:#2aa198">&#34;yes&#34;</span>,
        <span style="color:#2aa198">&#34;fill-version&#34;</span>:      <span style="color:#2aa198">&#34;yes&#34;</span>,
        <span style="color:#2aa198">&#34;with-QtechType&#34;</span>:    <span style="color:#2aa198">&#34;BW&#34;</span>,
    },
}
</code></pre></div><p>De <code>PreRun</code> en de <code>Annotations</code> zijn nog wat verwarrend maar daarover later meer!</p>
<ul class="pa0">
  
</ul>
<div class="mt6 instapaper_ignoref">
      
      
      </div>
    </div>

    <aside class="w-30-l mt6-l">




</aside>

  </article>

    </main>
    <footer class="bg-black bottom-0 w-100 pa3" role="contentinfo">
  <div class="flex justify-between">
  <a class="f4 fw4 hover-white no-underline white-70 dn dib-ns pv2 ph3" href="https://rphilips.github.io/qtechng-blog/" >
    &copy;  QtechNG Blog 2020 
  </a>
    <div>













</div>
  </div>
</footer>

    

  <script src="/qtechng-blog/dist/js/app.3fc0f988d21662902933.js"></script>


  </body>
</html>
