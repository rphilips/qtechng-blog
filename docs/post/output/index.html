<!DOCTYPE html>
<html lang="nl-nl">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    
    <title>Output | QtechNG Blog</title>
    <meta name="viewport" content="width=device-width,minimum-scale=1">
    <meta name="generator" content="Hugo 0.69.0-DEV" />
    
    
      <META NAME="ROBOTS" CONTENT="NOINDEX, NOFOLLOW">
    

    
    
      <link href="/qtechng-blog/dist/css/app.1cb140d8ba31d5b2f1114537dd04802a.css" rel="stylesheet">
    

    

    
      
    

    
    
    <meta property="og:title" content="Output" />
<meta property="og:description" content="Najaar 2006.
Microsoft bracht een nieuwe shell uit, de PowerShell. Nogal wat Unix/Linux affecionados konden enkel een smalend schouderophalen opbrengen. Ik dacht daar toch anders over: Unix/Linux had een krachtig pipe-systeem waarbij toepassingen informatie konden uitwisselen door de output en input streams te ketenen.
Essentieel was deze informatie overdracht echter beperkt tot tekst.
Niet zo in PowerShell: daar konden heuse objecten worden getransfereerd. Het klinkt allemaal wat abstract, maar ik kan je het verschil het beste uitleggen met docman." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://rphilips.github.io/qtechng-blog/post/output/" />
<meta property="article:published_time" content="2020-08-08T10:11:15+02:00" />
<meta property="article:modified_time" content="2020-08-08T10:11:15+02:00" />
<meta itemprop="name" content="Output">
<meta itemprop="description" content="Najaar 2006.
Microsoft bracht een nieuwe shell uit, de PowerShell. Nogal wat Unix/Linux affecionados konden enkel een smalend schouderophalen opbrengen. Ik dacht daar toch anders over: Unix/Linux had een krachtig pipe-systeem waarbij toepassingen informatie konden uitwisselen door de output en input streams te ketenen.
Essentieel was deze informatie overdracht echter beperkt tot tekst.
Niet zo in PowerShell: daar konden heuse objecten worden getransfereerd. Het klinkt allemaal wat abstract, maar ik kan je het verschil het beste uitleggen met docman.">
<meta itemprop="datePublished" content="2020-08-08T10:11:15&#43;02:00" />
<meta itemprop="dateModified" content="2020-08-08T10:11:15&#43;02:00" />
<meta itemprop="wordCount" content="592">



<meta itemprop="keywords" content="" /><meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Output"/>
<meta name="twitter:description" content="Najaar 2006.
Microsoft bracht een nieuwe shell uit, de PowerShell. Nogal wat Unix/Linux affecionados konden enkel een smalend schouderophalen opbrengen. Ik dacht daar toch anders over: Unix/Linux had een krachtig pipe-systeem waarbij toepassingen informatie konden uitwisselen door de output en input streams te ketenen.
Essentieel was deze informatie overdracht echter beperkt tot tekst.
Niet zo in PowerShell: daar konden heuse objecten worden getransfereerd. Het klinkt allemaal wat abstract, maar ik kan je het verschil het beste uitleggen met docman."/>

  </head>

  <body class="ma0 avenir bg-near-white">

    
   
  

  
  
  <header class="cover bg-top" style="background-image: url('https://rphilips.github.io/qtechng-blog/images/output.svg');">
    <div class="pb3-m pb6-l bg-black-60">
      <nav class="pv3 ph3 ph4-ns" role="navigation">
  <div class="flex-l justify-between items-center center">
    <a href="https://rphilips.github.io/qtechng-blog/" class="f3 fw2 hover-white no-underline white-90 dib">
      QtechNG Blog
    </a>
    <div class="flex-l items-center">
      

      
        <ul class="pl0 mr3">
          
          <li class="list f5 f4-ns fw4 dib pr3">
            <a class="hover-white no-underline white-90" href="/qtechng-blog/post/" title="Artikelen page">
              Artikelen
            </a>
          </li>
          
        </ul>
      
      














    </div>
  </div>
</nav>

      <div class="tc-l pv6 ph3 ph4-ns">
        
          <h1 class="f2 f1-l fw2 white-90 mb0 lh-title">Output</h1>
          
        
      </div>
    </div>
  </header>



    <main class="pb7" role="main">
      
  
  <article class="flex-l flex-wrap justify-between mw8 center ph3">
    <header class="mt4 w-100">
      <aside class="instapaper_ignoref b helvetica tracked">
          
        ARTIKELEN
      </aside>
      


      <h1 class="f1 athelas mt3 mb1">Output</h1>
      
      
      <time class="f6 mv4 dib tracked" datetime="2020-08-08T10:11:15&#43;02:00">August 8, 2020</time>

      
      
    </header>
    <div class="nested-copy-line-height lh-copy serif f4 nested-links nested-img mid-gray pr4-l w-two-thirds-l"><p>Najaar 2006.</p>
<p>Microsoft bracht een nieuwe shell uit, <a href="https://en.wikipedia.org/wiki/PowerShell">de PowerShell</a>. Nogal wat Unix/Linux affecionados konden enkel een smalend schouderophalen opbrengen. Ik dacht daar toch anders over: Unix/Linux had een krachtig pipe-systeem waarbij toepassingen informatie konden uitwisselen door de output en input streams te ketenen.</p>
<p>Essentieel was deze informatie overdracht echter beperkt tot tekst.</p>
<p>Niet zo in PowerShell: daar konden heuse objecten worden getransfereerd. Het klinkt allemaal wat abstract, maar ik kan je het verschil het beste uitleggen met <code>docman</code>. Docman is een Brocade toepassing die blobs (documenten) beheert.</p>
<p>Deze documenten worden gekarakteriseerd door een identificatie die lijkt op een file path, bijvoorbeeld: <code>/exchange/66fe04/lc.bin</code>.</p>
<p>Als je de eigenschappen wil weten van dit document gebruik je de <code>docman</code> toepassing (geschreven in <em>Python</em>):</p>
<div class="highlight"><pre style="color:#586e75;background-color:#eee8d5;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">moto /library/tmp&gt; docman -properties /exchange/66fe04/lc.bin
<span style="color:#268bd2">path</span>=/exchange/66fe04/lc.bin
<span style="color:#268bd2">file</span>=/library/database/docman/exchange/x6/6f/e04lc.bin.rm20200421
<span style="color:#268bd2">size</span>=<span style="color:#2aa198;font-weight:bold">4053</span>
<span style="color:#268bd2">md5</span>=fcf4aff144fd688333a889951f6cc72b
<span style="color:#268bd2">shorturl</span>=/docman/exchange/66fe04/lc.bin
<span style="color:#268bd2">longurl</span>=https://anet.be/docman/exchange/66fe04/lc.bin
</code></pre></div><p>Het komt geregeld voor dat je deze informatie wil delen met een andere (niet-python) toepassing. Typisch gebeurt dit via piping of via een tussenliggend bestand.</p>
<p>Het hoeft geen betoog dat dit heel foutgevoelig, weinig flexibel en inefficiënt is.</p>
<p>In PowerShell kan je deze informatie vatten als een object en als dusdanig uitwisselen met andere toepassingen.</p>
<p>In <code>qtech</code> ben ik verschillende malen op dit probleem gestoten. Ik maakte de toepassing met het oog op menselijke consumptie (zoals trouwens de meeste Unix toepassingen). Al snel liep ik op tegen allerlei hindernissen. De resultaten van de toepassingen moesten kunnen worden getoond in een <code>wxPython</code> toepassing. Aha, dergelijke toepassingen kunnen ook HTML aan en een extra parameter was geboren: <code>HTML=yes</code>. Vlijtig herwerkte ik de output van (10-tallen) commando&rsquo;s en sub-commando&rsquo;s zodat ook HTML output mogelijk was. Toen kwamen <a href="https://en.wikipedia.org/wiki/Emacs">Emacs</a>, <a href="https://en.wikipedia.org/wiki/Textadept">Textadept</a>, <a href="https://en.wikipedia.org/wiki/Sublime_Text">Sublime Text</a> en <a href="https://en.wikipedia.org/wiki/Visual_Studio_Code">Visual Studio Code</a>. Telkens kon ik aan de slag: zowel in de <code>qtech</code> toepassing zelf als in de bewuste applicaties.</p>
<p>Met <code>qtechng</code> wil ik het beter doen. Ik kon wel geen gebruik maken van <em>echte</em> objecten: we willen immers <code>qtechng</code> gebruiken op diverse platformen en samenwerkend met diverse toepassingen.</p>
<p><em>The Next Best Thing</em> is <code>JSON</code>.</p>
<p><code>JSON</code> - goed geformatteerd - is best leesbaar en uitstekend geschikt om met allerlei technologieën te worden verwerkt. Alle commando&rsquo;s en sub-commando&rsquo;s van <code>qtechng</code> gaan dus <code>JSON</code> produceren (tenminste indien dit opportuun is voor dit commando). Deze <code>JSON</code> heeft ook een heel herkenbare structuur.</p>
<p>Een paar voorbeelden die de kracht van deze aanpak illustreren.</p>
<p>Op mijn werkstation:</p>
<div class="highlight"><pre style="color:#586e75;background-color:#eee8d5;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#cb4b16">cd</span> /home/rphilips/qtechng/brocade/edit/lab/application
qtechng file add file1.txt file2.txt --version=9.92 --qdir=/lab/application <span style="color:#93a1a1;font-style:italic"># maak 2 nieuwe bestanden</span>
{
<span style="color:#2aa198">&#34;host&#34;</span>: <span style="color:#2aa198">&#34;rphilips-home&#34;</span>,
<span style="color:#2aa198">&#34;time&#34;</span>: <span style="color:#2aa198">&#34;2020-08-08T11:01:58+02:00&#34;</span>,
<span style="color:#2aa198">&#34;RESULT&#34;</span>: [
{
<span style="color:#2aa198">&#34;arg&#34;</span>: <span style="color:#2aa198">&#34;file1.txt&#34;</span>,
<span style="color:#2aa198">&#34;version&#34;</span>: <span style="color:#2aa198">&#34;9.92&#34;</span>,
<span style="color:#2aa198">&#34;qpath&#34;</span>: <span style="color:#2aa198">&#34;/lab/application/file1.txt&#34;</span>
},
{
<span style="color:#2aa198">&#34;arg&#34;</span>: <span style="color:#2aa198">&#34;file2.txt&#34;</span>,
<span style="color:#2aa198">&#34;version&#34;</span>: <span style="color:#2aa198">&#34;9.92&#34;</span>,
<span style="color:#2aa198">&#34;qpath&#34;</span>: <span style="color:#2aa198">&#34;/lab/application/file2.txt&#34;</span>
}
]
}
</code></pre></div><p>Het JSON object heeft steeds dezelfde structuur: <em>host</em>, <em>time</em> en <em>RESULT</em> komen altijd terug.</p>
<p>Hm, ga je zeggen, dit is toch wel heel erg <em>verbose</em>. Dat is zo. Het is immers de bedoeling dat als deze gegevens dienen te worden verwerkt,  er <em>NIET</em> meer aan <code>qtechng</code> dient te worden gesleuteld: de gemakkelijk te verwerken JSON output moet voldoende zijn.</p>
<p>Trouwens &hellip;</p>
<p>In een vorige blogpost heb je kunnen kennismaken met <code>JSONPath</code>. Deze technologie kan worden gebruikt om de output drastisch te vereenvoudigen. Het goede nieuws is dat er in <code>qtechng</code> een <code>JSONPath</code> processor is ingebouwd! Deze kan eenvoudig worden geactiveerd door een <code>jsonpath</code> flag mee te geven aan het commando.</p>
<p>Voorbeelden:</p>
<div class="highlight"><pre style="color:#586e75;background-color:#eee8d5;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#cb4b16">cd</span> /home/rphilips/qtechng/brocade/edit/lab/application
qtechng file add file3.txt file4.txt --version=9.92 --qdir=/lab/application --jsonpath=<span style="color:#2aa198">&#34;</span>$<span style="color:#2aa198">.RESULT&#34;</span>
[
{
<span style="color:#2aa198">&#34;arg&#34;</span>: <span style="color:#2aa198">&#34;file3.txt&#34;</span>,
<span style="color:#2aa198">&#34;version&#34;</span>: <span style="color:#2aa198">&#34;9.92&#34;</span>,
<span style="color:#2aa198">&#34;qpath&#34;</span>: <span style="color:#2aa198">&#34;/lab/application/file3.txt&#34;</span>
},
{
<span style="color:#2aa198">&#34;arg&#34;</span>: <span style="color:#2aa198">&#34;file4.txt&#34;</span>,
<span style="color:#2aa198">&#34;version&#34;</span>: <span style="color:#2aa198">&#34;9.92&#34;</span>,
<span style="color:#2aa198">&#34;qpath&#34;</span>: <span style="color:#2aa198">&#34;/lab/application/file4.txt&#34;</span>
}
]
</code></pre></div><p>of nog korter:</p>
<div class="highlight"><pre style="color:#586e75;background-color:#eee8d5;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#cb4b16">cd</span> /home/rphilips/qtechng/brocade/edit/lab/application
qtechng file add file5.txt file6.txt file7.txt --version=9.92 --qdir=/lab/application --jsonpath=<span style="color:#2aa198">&#34;</span>$<span style="color:#2aa198">.RESULT[:].qpath&#34;</span>
[
<span style="color:#2aa198">&#34;/lab/application/file5.txt&#34;</span>,
<span style="color:#2aa198">&#34;/lab/application/file6.txt&#34;</span>,
<span style="color:#2aa198">&#34;/lab/application/file7.txt2&#34;</span>
]
</code></pre></div><p>Een volgende blog post zal het verwerken van fouten onder de loep nemen.</p>
<ul class="pa0">
  
</ul>
<div class="mt6 instapaper_ignoref">
      
      
      </div>
    </div>

    <aside class="w-30-l mt6-l">




</aside>

  </article>

    </main>
    <footer class="bg-black bottom-0 w-100 pa3" role="contentinfo">
  <div class="flex justify-between">
  <a class="f4 fw4 hover-white no-underline white-70 dn dib-ns pv2 ph3" href="https://rphilips.github.io/qtechng-blog/" >
    &copy;  QtechNG Blog 2020 
  </a>
    <div>













</div>
  </div>
</footer>

    

  <script src="/qtechng-blog/dist/js/app.3fc0f988d21662902933.js"></script>


  </body>
</html>
